# Keyboard Map

**Project:** ChronoXP™ Journal  
**Date:** October 22, 2025

---

## Philosophy

**Every feature accessible via keyboard.** No mouse-only interactions.

**Conventions:**
- `Ctrl` = Windows/Linux
- `Cmd` (⌘) = macOS
- `Alt` = Windows/Linux (Option on macOS)

---

## Global Shortcuts (Work Anywhere)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+K` | Open Command Bar | Search + commands |
| `Ctrl/Cmd+N` | New entry | Creates blank entry |
| `Ctrl/Cmd+F` | Global search | Opens search modal |
| `Ctrl/Cmd+,` | Open Settings | (Comma key) |
| `Ctrl/Cmd+1` | Go to Journal Canvas | Surface navigation |
| `Ctrl/Cmd+2` | Go to Library | Surface navigation |
| `Ctrl/Cmd+3` | Go to Records Cavern | Surface navigation |
| `Ctrl/Cmd+Q` | Quit app | macOS only (Alt+F4 on Windows) |
| `Esc` | Close modal / Cancel | Universal escape |
| `F1` | Help / Documentation | Opens in-app help |

---

## Journal Canvas (Writing)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+S` | Force save | (Autosave always on) |
| `Ctrl/Cmd+B` | Bold | Selected text |
| `Ctrl/Cmd+I` | Italic | Selected text |
| `Ctrl/Cmd+U` | Underline | Selected text |
| `Ctrl/Cmd+K` | Insert link | Opens link dialog |
| `Ctrl/Cmd+Shift+I` | Insert image | Opens file picker |
| `Ctrl/Cmd+Shift+C` | Insert code block | For technical users |
| `Ctrl/Cmd+Shift+.` | Toggle bulleted list | |
| `Ctrl/Cmd+Shift+1` | Heading 1 | Current line |
| `Ctrl/Cmd+Shift+2` | Heading 2 | Current line |
| `Ctrl/Cmd+Shift+3` | Heading 3 | Current line |
| `Ctrl/Cmd+T` | Open tag input | Add/edit tags |
| `Ctrl/Cmd+[` | Previous entry | Navigate by date |
| `Ctrl/Cmd+]` | Next entry | Navigate by date |
| `Tab` | Accept Muse suggestion | (If AI enabled) |
| `Alt+Enter` | Accept Muse (alternative) | |
| `Esc` | Dismiss Muse suggestion | |
| `Ctrl/Cmd+Z` | Undo | Standard |
| `Ctrl/Cmd+Shift+Z` | Redo | Standard |
| `Ctrl/Cmd+A` | Select all | Standard |
| `Ctrl/Cmd+C` | Copy | Standard |
| `Ctrl/Cmd+V` | Paste | Standard |
| `Ctrl/Cmd+X` | Cut | Standard |

---

## Tag Input (When Focused)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Enter` | Add tag | Commits current input |
| `Backspace` | Remove last tag | (If input is empty) |
| `Esc` | Close tag input | Returns focus to canvas |
| `Tab` | Accept autocomplete | First suggestion |
| `Arrow Down` | Next autocomplete | |
| `Arrow Up` | Previous autocomplete | |

---

## Library (Browse & Search)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+F` | Focus search bar | |
| `Enter` | Run search | (If in search bar) |
| `Arrow Down` | Next entry in list | |
| `Arrow Up` | Previous entry | |
| `Enter` | Open selected entry | |
| `Ctrl/Cmd+Click` | Open in new window | (Future feature) |
| `Tab` | Switch between tabs | Calendar / Tags / All Entries |
| `Shift+Tab` | Previous tab | |

---

## Search Modal

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+F` | Open search | (If not already open) |
| `Esc` | Close search | |
| `Enter` | Run search | (If in search input) |
| `Arrow Down` | Next result | |
| `Arrow Up` | Previous result | |
| `Enter` | Open selected result | Opens entry in Canvas |
| `Ctrl/Cmd+Enter` | Open in new window | (Future) |

---

## Command Bar

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+K` | Open Command Bar | (If not already open) |
| `Esc` | Close Command Bar | |
| `Enter` | Execute command | Runs selected suggestion |
| `Arrow Down` | Next suggestion | |
| `Arrow Up` | Previous suggestion | |
| `Ctrl/Cmd+Backspace` | Clear input | |

**Example commands:**
- "new entry" → Creates new entry
- "search for X" → Runs semantic search
- "go to settings" → Opens Settings
- "export data" → Opens export dialog
- "hide cavern" → Disables Records Cavern

---

## Records Cavern

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Arrow Keys` | Pan cavern | Explore visually |
| `+` / `-` | Zoom in / out | (Or scroll wheel) |
| `Enter` | Open artifact details | (If artifact focused) |
| `Tab` | Next artifact | |
| `Shift+Tab` | Previous artifact | |
| `Esc` | Close artifact modal | |
| `Ctrl/Cmd+H` | Hide Cavern | Toggles visibility |

---

## Settings

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+,` | Open Settings | (Global) |
| `Tab` | Navigate sections | Sidebar → Content |
| `Arrow Down` | Next setting item | |
| `Arrow Up` | Previous item | |
| `Space` | Toggle checkbox | |
| `Enter` | Open dropdown | |
| `Esc` | Close Settings | (Or click X) |

---

## Modals & Dialogs

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Esc` | Close modal | Universal |
| `Tab` | Next button/input | |
| `Shift+Tab` | Previous button/input | |
| `Enter` | Confirm / Submit | Default action (blue button) |
| `Ctrl/Cmd+W` | Close modal | Alternative to Esc |

---

## Export Dialog

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Tab` | Navigate options | Checkboxes, encryption, etc. |
| `Space` | Toggle checkbox | |
| `Enter` | Export | Opens file save dialog |
| `Esc` | Cancel | Returns to Settings |

---

## Calendar (Library View)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Arrow Keys` | Navigate dates | Up/Down/Left/Right |
| `Enter` | Open entry for date | (If entry exists) |
| `Ctrl/Cmd+T` | Go to today | Jumps to current date |
| `PageUp` | Previous month | |
| `PageDown` | Next month | |

---

## Accessibility Shortcuts

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd++` | Increase text size | (Or zoom in) |
| `Ctrl/Cmd+-` | Decrease text size | |
| `Ctrl/Cmd+0` | Reset text size | |
| `Ctrl/Cmd+Shift+M` | Toggle reduced motion | (In settings) |
| `Ctrl/Cmd+Shift+H` | Toggle high contrast | (In settings) |
| `Alt+Shift+K` | Show keyboard shortcuts | Opens this reference |

---

## Developer Shortcuts (Debug Mode Only)

| Shortcut | Action | Notes |
|----------|--------|-------|
| `Ctrl/Cmd+Shift+D` | Open DevTools | Tauri/WebView inspector |
| `Ctrl/Cmd+R` | Reload app | |
| `Ctrl/Cmd+Shift+R` | Hard reload | Clears cache |
| `F12` | Open DevTools | Alternative |

---

## Custom Shortcut Configuration (Future Feature)

**Post-MVP:** Allow users to remap shortcuts

**Settings → Keyboard:**
```
┌────────────────────────────────────────┐
│ Keyboard Shortcuts                     │
├────────────────────────────────────────┤
│ Action             Shortcut   [Edit]   │
│ New entry          Ctrl+N     [Edit]   │
│ Search             Ctrl+F     [Edit]   │
│ Command Bar        Ctrl+K     [Edit]   │
│ ...                                    │
│                                        │
│ [Reset to Defaults]                    │
└────────────────────────────────────────┘
```

---

## Keyboard Navigation Principles

### 1. Tab Order
- **Logical flow:** Top to bottom, left to right
- **Skip invisible elements:** Hidden modals not in tab order
- **Loops within modals:** Tab cycles inside modal (doesn't escape to background)

### 2. Focus Trapping
- **Modals trap focus:** User must close modal to return to main app
- **Esc always escapes:** Never trapped without exit

### 3. Focus Restoration
- **After closing modal:** Focus returns to triggering element
- **After navigation:** Focus moves to top of new surface (H1 or first input)

### 4. Visual Feedback
- **Thick outline:** 3px blue border on focused element
- **Offset:** 2px gap between element and outline (clarity)
- **Never remove:** `:focus { outline: none; }` is forbidden in codebase

---

## Screen Reader Shortcuts (Not ChronoXP-specific)

**For reference (users with NVDA, JAWS, VoiceOver):**

| NVDA | JAWS | VoiceOver | Action |
|------|------|-----------|--------|
| `Insert+Down` | `Insert+Down` | `VO+Shift+Down` | Read all |
| `H` | `H` | `VO+Cmd+H` | Next heading |
| `B` | `B` | `VO+Cmd+B` | Next button |
| `F` | `F` | `VO+Cmd+J` | Next form field |
| `Insert+F7` | `Insert+F3` | `VO+U` | Elements list |

---

## Conflicts & Resolutions

### Conflict: `Ctrl+K` (Insert Link vs. Command Bar)
**Resolution:**
- **In Canvas (typing):** `Ctrl+K` opens link dialog (standard behavior)
- **Everywhere else:** `Ctrl+K` opens Command Bar
- **Alternative for Command Bar in Canvas:** `Ctrl+Shift+K` or `Alt+Space`

### Conflict: `Ctrl+T` (New Tab in Browser)
**Resolution:**
- ChronoXP is desktop app (not browser), so `Ctrl+T` available for tag input
- If WebView intercepts, use `Ctrl+Shift+T` instead

### Conflict: `Esc` (Multiple Actions)
**Resolution:**
- **Priority order:**
  1. Close modal (if open)
  2. Dismiss Muse suggestion (if active)
  3. Exit fullscreen (if in fullscreen)
  4. Blur active input (de-focus)

---

## Keyboard Cheat Sheet (In-App)

**Accessible via:** `Alt+Shift+K` or Help menu

**Design:**
- Two-column layout (Category | Shortcut + Action)
- Searchable (filter by action name)
- Printable (for users who want physical reference)

**Example:**
```
┌─────────────────────────────────────────────────────┐
│  Keyboard Shortcuts                          [×]    │
├─────────────────────────────────────────────────────┤
│  Search: [_______________]                          │
├─────────────────────────────────────────────────────┤
│  GLOBAL                                             │
│  Ctrl+K          Command Bar                        │
│  Ctrl+N          New entry                          │
│  Ctrl+F          Search                             │
│  Ctrl+,          Settings                           │
│                                                     │
│  WRITING                                            │
│  Ctrl+B          Bold                               │
│  Ctrl+I          Italic                             │
│  Tab             Accept AI suggestion               │
│                                                     │
│  [Print] [Close]                                    │
└─────────────────────────────────────────────────────┘
```

---

## Testing Checklist (Pre-Release)

- [ ] All shortcuts work on Windows
- [ ] All shortcuts work on macOS (Cmd vs. Ctrl)
- [ ] All shortcuts work on Linux
- [ ] No conflicts with OS-level shortcuts
- [ ] Tab order is logical on all screens
- [ ] Focus visible on all interactive elements
- [ ] Esc closes all modals
- [ ] Screen reader announces shortcuts (e.g., "Save entry, Ctrl+S")

---

## Future: Voice Commands (Post-MVP)

**Integration with OS voice control:**
- "Create new entry"
- "Search for work stress"
- "Go to settings"
- "Export my journal"

**Requires:** Accessible labels on all buttons (already implemented)

---

## References
- [Web Content Accessibility Guidelines (WCAG) - Keyboard](https://www.w3.org/WAI/WCAG21/Understanding/keyboard.html)
- [Inclusive Components - Keyboard Navigation](https://inclusive-components.design/menus-menu-buttons/)
- [Tauri Keyboard Events](https://tauri.app/v2/reference/javascript/api/namespaceevent/#keyboard)
